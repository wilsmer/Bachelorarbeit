
\input{preamble.tex}
\begin{document}

 \input{content/Deckblatt_Rueckseite.tex}

 \pagenumbering{Roman} 
 \tableofcontents
 

 \printglossary[title={Abkürzungsverzeichnis}] 
 %\setcounter{page}{1}
 
 \chapter{Einleitung}
 \section{Motivation}
 \input{content/Einleitung.tex}
 
 \pagenumbering{arabic} 
 
 \chapter{Grundlagen}
 \input{content/Zahlendarstellung.tex}
 \input{content/Fouriertransformation.tex}
 \input{content/Berechnung_DFT.tex} 
 \input{content/Berechnung_DCT.tex} 
 
 
 
 
 
 
 \chapter{Analyse}
 
 \input{content/Bewertung_DCT.tex}
 \input{content/Bewertung_DFT.tex}
 \input{content/DCT_DFT.tex}
 
 \input{content/Aufwand_Matrizenmultiplikation.tex}

 
 
 
 \chapter{Entwurf}
 \input{content/Implementierung_Konstantenmultiplizierer.tex} 
 \input{content/Implementierung_DFT.tex}
 
 
  
 \chapter{Evaluation}
 \section{Simulation}
 \subsection{NC Sim - positive Zahlendarstellung}
 
 \subsection{Anzahl benötigter Takte}
 Anhand der Simulation kann die Anzahl der vorausgesagten benötigten Takte verifiziert werden. 
 
 Nachdem \texttt{nReset} auf '1' gesetzt wird, werden die Eingangswerte
 eingelesen. Wenn dieser Vorgang abgeschlossen ist, geht \texttt{loaded} auf '1'. Mit der nächsten steigenden Taktflanke, in Bild \ref{pic:Simulationsdauer} bei 
 \SI{340}{ns}, beginnt die Berechnung
 der \gls{2d-dft}. Beendet ist sie, nachdem die Matrizenmultiplikation auf die Eingangswerte und anschließend auf die \gls{1d-dft}-Werte angewandt wurde. Also nach $2 \cdot 64$
 einzelnen Berechnungen. Wenn dies erfolgt ist, wird \texttt{result\_ready} auf '1' gesetzt. Dies geschieht bei \SI{20\,820}{ns}. Bei einer Taktfrequenz von $(\SI{40}{ns})^{-1}$
 (siehe \ref{src:dft8_optimiert_top}) ergeben sich so 512 Takte. Dies bestätigt auch der Edge Count, ebenfalls auf dem Bild zu sehen, welcher die Flanken des \texttt{clk}-Signals 
 zählt. In der Simulation ist zu erkennen, dass die Berechnung der Elemente 
 unterschiedlich viele Takte beansprucht. Hieran lässt sich ebenfalls sehen, dass die 1. (ungerade) Zeile weniger Takte gegenüber der 2. (geraden) Zeile benötigt. 
 
 %Auch in der Abbildung \ref{pic:Simulationsdauer} zu sehen ist, dass \texttt{element\_out} für 0 bis 7 weniger Takte einnimmt, als in den darauf folgenden 8. Dieses Muster
 %wiederholt sich und hat, wie in Abschnitt \ref{sec:berechnung_anzahl_takte} erläutert, damit zu tun, dass für die geraden
 
 \begin{figure}[ht]
  \centering
  \includegraphics[width=0.58\textwidth]{img/Simulationsdauer_Anfang.png}
  \hfill
  \includegraphics[width=0.161\textwidth]{img/Simulationsdauer_Mitte.png}
  \hfill
  \includegraphics[width=0.241\textwidth]{img/Simulationsdauer_Ende.png}
  \caption{Simulations der 2D-DFT mit \texttt{NC Launch}}
  \label{pic:Simulationsdauer}
 \end{figure}

 \begin{figure}[ht]
  \centering
  \includegraphics[width=0.6\textwidth]{img/Simulation_edge_count_clk.png}
  \caption{Edge Count für eine 2D-DFT}
 \end{figure}


 \subsection{Akkumulation von Fehlern}
 Durch die Begrenzung der Bitbreite ist es nötig nach jeder Addition den Wert zu halbieren. Hierbei steigt die Abweichung gegenüber einer verlustfreien Berechnung immer dann, 
 wenn das letzte eine 1 ist. Im Mittel ist dies bei der Hälfte der Additionen der Fall. In der Hälfte aller Fälle wird also der Wert um ein halbes LSB zu viel verringert.
 Bei der Multiplikation sieht es nicht besser aus, hier werden aus einem 24 Bit Vektor ebenfalls nur 12 übernommen.
 Da für die Berechnung einer Zahl der 1D-DFFT je nach Zeile entweder 8 oder 12 Werte akkumuliert sowie 0 bis 4 Werte multipliziert werden, für die 2D-DFT entsprechend doppelt 
 so viele, akkumulieren sich zwangsläufig Fehler. Bei 12 Bit Eingangswerten wäre ein 47 Bit Ausgangsvektor nötig, um dies vollständig zu vermeiden. Dies ist jedoch aus u.a.
 Platzgründen nicht umsetzbar.
 $\Rightarrow$ Anhand eines Simulationsbeispiels zeigen, dass die mit VHDL berechneten Werte immer kleiner als die in Matlab berechneten sind.

 \section{Testumgebung}
 \subsection{1D-DFT, Integer}
 \subsection{2D-DFT, Integer}
 \subsection{2D-DFT, Q-Format}
 \subsection{Struktogramm des Testablaufs}
 \subsection{Reale Eingangswerte}
 
 \section{Anzahl Standardzellen}
 %\subsection{Beschreibung}
 \subsection{1D / 2D}
 \subsection{3 Lagen / 4 Lagen}
 \section{Visualisierung der Netzliste}
 \section{Floorplan, Padring}
 
 \chapter{Schlussfolgerungen}
 \section{Zusammenfassung}
 \section{Bewertung und Fazit}
 
 \section{Ausblick}
 
 
 \listoffigures
 \addcontentsline{toc}{chapter}{\listfigurename}

 \listoftables
 \addcontentsline{toc}{chapter}{\listtablename}

 
 \printbibliography
 \addcontentsline{toc}{chapter}{Literatur}
 
 \chapter{Anhang}
 \input{content/Anhang.tex}

\end{document}
